<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>WA Automation</title>
  <link rel="stylesheet" href="style.css"/>
  <script src="https://cdn.jsdelivr.net/npm/qrcode/build/qrcode.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
</head>
<body class="landing">
  <div class="qr-container">
    <h1>Scan QR Code to Connect WhatsApp</h1>
    <canvas id="qr-canvas"></canvas>
  </div>

  <script>
    async function fetchQRCode() {
      try {
        const response = await axios.get('/sessions/qr');
        const qrCode = response.data.qr;
        if (qrCode) {
          const canvas = document.getElementById('qr-canvas');
          QRCode.toCanvas(canvas, qrCode, function (error) {
            if (error) console.error(error);
            else console.log('QR Code displayed on frontend');
          });
        }
      } catch (err) {
        console.error('Error fetching QR:', err);
      }
    }

    fetchQRCode();
    setInterval(fetchQRCode, 5000);

    // بعد المسح، يمكن تحويل المستخدم تلقائيًا للـ Dashboard
    // مثال: setTimeout(() => window.location.href = 'dashboard.html', 10000);
  </script>
</body>
</html>

  
    

