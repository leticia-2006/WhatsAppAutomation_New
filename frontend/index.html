<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>WA Automation Dashboard</title>
  <link rel="stylesheet" href="/style.css">
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
</head>
<body>
  <div class="dashboard">
    <!-- Sidebar -->
    <aside class="sidebar">
      <div class="logo">WA Dashboard</div>
      <nav>
        <a href="#" class="active">Sessions</a>
        <a href="#">Statistics</a>
        <a href="#">Tags</a>
        <a href="#">Settings</a>
      </nav>
      <footer>
        <small>Â© 2025 WA Automation</small>
      </footer>
    </aside>

    <!-- Main content -->
    <main class="main">
      <header>
        <h1>Sessions</h1>
        <p>Manage WhatsApp connections & messages</p>
      </header>

      <!-- QR -->
      <section id="qr-container" class="qr-box">
        <h2>Scan this QR Code to connect WhatsApp</h2>
        <canvas id="qr-canvas"></canvas>
      </section>

      <!-- Controls -->
      <div class="controls">
        <div class="tabs">
          <button onclick="loadSessions('all')" class="tab active">All Sessions</button>
          <button onclick="loadSessions('group')" class="tab">Group Session</button>
          <button onclick="loadSessions('unread')" class="tab">Unread</button>
          <button onclick="loadSessions('unreplied')" class="tab">Unreplied</button>
        </div>

        <div class="filters">
          <input type="text" id="search-input" placeholder="Search by name or phone" oninput="searchSessions()">

          <select id="source-lang">
            <option value="en">EN</option>
            <option value="ar">AR</option>
            <option value="fr">FR</option>
          </select>
          <select id="target-lang">
            <option value="en">EN</option>
            <option value="ar">AR</option>
            <option value="fr">FR</option>
          </select>

          <select id="tag-filter" onchange="filterByTag()">
            <option value="">All Tags</option>
            <option value="VIP">VIP</option>
            <option value="Repeat">Repeat</option>
          </select>
        </div>
      </div>

      <!-- Sessions Table -->
      <div class="table">
        <div class="thead">
          <div>ID</div>
          <div>Name / Phone</div>
          <div>Last Msg</div>
          <div>Status</div>
          <div>Note</div>
          <div>Action</div>
        </div>
        <div class="tbody" id="sessions-list">
          <!-- Sessions injected via JS -->
        </div>
      </div>
    </main>
  </div>

  <!-- Note Modal -->
  <div id="note-modal" class="modal">
    <textarea id="note-text" placeholder="Enter note..."></textarea>
    <button onclick="saveNote()">Save Note</button>
    <button onclick="closeNoteModal()">Cancel</button>
  </div>

  <!-- Scripts -->
  <script>
    function openNoteModal(clientId) {
      const modal = document.getElementById('note-modal');
      modal.style.display = 'block';
      modal.dataset.clientId = clientId;
    }
    function closeNoteModal() {
      const modal = document.getElementById('note-modal');
      modal.style.display = 'none';
      modal.dataset.clientId = '';
    }
    function saveNote() {
      const modal = document.getElementById('note-modal');
      const clientId = modal.dataset.clientId;
      const noteText = document.getElementById('note-text').value;
      const client = currentSessions.find(c => c.id === parseInt(clientId));
      if (client) {
        client.note = noteText;
        renderSessions(currentSessions);
      }
      closeNoteModal();
    }
  </script>
  <script src="https://cdn.socket.io/4.7.1/socket.io.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/qrcode/build/qrcode.min.js"></script>
  <script src="/script.js"></script>
</body>
</html>


